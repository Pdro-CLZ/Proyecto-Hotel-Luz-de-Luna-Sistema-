<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Editar Empleado</title>
    <link rel="stylesheet" href="styles.css" />
    <script>
      // Simulación de IDs de empleados y datos pre-cargados para demo
      const empleadosData = {
        1: {
          nombre: "Juan",
          apellido: "Pérez",
          fechaNacimiento: "1985-05-10",
          puesto: "Recepcionista",
          salario: "350000",
          telefono: "88885555",
          direccion: "Calle 123, San José",
          estado: "Activo",
        },
        2: {
          nombre: "Ana",
          apellido: "Gómez",
          fechaNacimiento: "1990-12-01",
          puesto: "Cocinero",
          salario: "300000",
          telefono: "87776666",
          direccion: "Avenida 456, Heredia",
          estado: "Inactivo",
        },
      };

      function cargarEmpleado() {
        const selectId = document.getElementById("empleado_id");
        const id = selectId.value;
        if (!id) {
          alert("Escoja un ID");
          return;
        }
        const datos = empleadosData[id];
        if (!datos) {
          alert("Empleado no encontrado");
          return;
        }
        document.getElementById("nombre").value = datos.nombre;
        document.getElementById("apellido").value = datos.apellido;
        document.getElementById("fecha_nacimiento").value =
          datos.fechaNacimiento;
        document.getElementById("puesto").value = datos.puesto;
        document.getElementById("salario").value = datos.salario;
        document.getElementById("telefono").value = datos.telefono;
        document.getElementById("direccion").value = datos.direccion;
        document.getElementById("estado").value = datos.estado;
      }

      function validarTexto(text) {
        const regex = /^[a-zA-Z\s]+$/;
        return regex.test(text);
      }

      function validarNumeros(text) {
        const regex = /^[0-9]+$/;
        return regex.test(text);
      }

      function validarFecha(text) {
        // formato YYYY-MM-DD
        const regex = /^\d{4}-\d{2}-\d{2}$/;
        if (!regex.test(text)) return false;
        const d = new Date(text);
        return d instanceof Date && !isNaN(d);
      }

      function guardarCambios(event) {
        event.preventDefault();

        // Validaciones
        const nombre = document.getElementById("nombre").value.trim();
        const apellido = document.getElementById("apellido").value.trim();
        const fechaNacimiento = document
          .getElementById("fecha_nacimiento")
          .value.trim();
        const puesto = document.getElementById("puesto").value.trim();
        const salario = document.getElementById("salario").value.trim();
        const telefono = document.getElementById("telefono").value.trim();
        const direccion = document.getElementById("direccion").value.trim();
        const estado = document.getElementById("estado").value;

        if (
          !nombre ||
          !apellido ||
          !fechaNacimiento ||
          !puesto ||
          !salario ||
          !telefono ||
          !direccion
        ) {
          alert("Celda en blanco");
          return;
        }
        if (!validarTexto(nombre)) {
          alert("Caracteres indebidos en nombre");
          return;
        }
        if (!validarTexto(apellido)) {
          alert("Caracteres indebidos en apellido");
          return;
        }
        if (!validarFecha(fechaNacimiento)) {
          alert(
            "Ingrese una fecha válida con el siguiente formato: YYYY-MM-DD"
          );
          return;
        }
        if (!validarNumeros(salario)) {
          alert("Solo se permiten números en salario");
          return;
        }
        if (parseInt(salario) < 0) {
          alert("Número no puede ser negativo en salario");
          return;
        }
        if (!validarNumeros(telefono)) {
          alert("Solo se permiten números en teléfono");
          return;
        }
        if (telefono.length < 8 || telefono.length > 10) {
          alert("Teléfono con cantidad de números indebida");
          return;
        }

        alert("Actualización satisfactoria");
        // Aquí enviarías datos al backend para guardar.
      }
    </script>
  </head>
  <body>
    <main id="content" class="form-container">
      <h1>Editar Empleado</h1>
      <label for="empleado_id">Seleccione ID de empleado:</label>
      <select id="empleado_id" onchange="cargarEmpleado()">
        <option value="">--Seleccione--</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <!-- Aquí cargarías los IDs reales -->
      </select>

      <form id="form_empleado" onsubmit="guardarCambios(event)">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" />

        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" name="apellido" />

        <label for="fecha_nacimiento">Fecha de nacimiento (YYYY-MM-DD):</label>
        <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" />

        <label for="puesto">Puesto:</label>
        <input type="text" id="puesto" name="puesto" />

        <label for="salario">Salario actual:</label>
        <input type="number" id="salario" name="salario" min="0" />

        <label for="telefono">Teléfono:</label>
        <input type="tel" id="telefono" name="telefono" />

        <label for="direccion">Dirección:</label>
        <input type="text" id="direccion" name="direccion" />

        <label for="estado">Estado:</label>
        <select id="estado" name="estado">
          <option value="Activo">Activo</option>
          <option value="Inactivo">Inactivo</option>
        </select>

        <button type="submit">Guardar Cambios</button>
        <a href="empleados_list.html">
          <button type="button">Volver</button>
        </a>
      </form>
    </main>
  </body>
</html>
